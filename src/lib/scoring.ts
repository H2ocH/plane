full contents of src/lib/scoring.ts